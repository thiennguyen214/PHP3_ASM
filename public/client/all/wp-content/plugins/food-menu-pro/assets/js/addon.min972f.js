!function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}!function(e){"use strict";e(document).ready((function(){n()})),e(document).on("fmp_trigger_popup",(function(){n()}));var n=function(){var t=e(".fmp-grand-total");a.validationRequiredOption(),t.length&&(a.calculatePrice(t,!0),a.calculatePrice(t))},a={validationRequiredOption:function(){e(".fmp-product-addons-wrap").find(".fmp-required-addon-opt").each((function(){var t=e(this),n=t.data("option-type");t.find(".fmp-addon-field").on("change keyup",(function(){if(["dropdown","text"].includes(n)){var a=!e(this).val().trim();t.parent().toggleClass("fmp-field-error",a)}else{var r=t.find("input:checked").length>0;t.parent().toggleClass("fmp-field-error",!r),t.find("input").each((function(){e(this).prop("required",!r)}))}}))})),e(".single_add_to_cart_button").on("click",(function(t){var n,r=!0;if(e(".fmp-product-addons-wrap").find(".fmp-required-addon-opt").each((function(){var t=e(this),n=t.data("option-type");if("dropdown"===n){var a=t.find("option:selected").val();r=""!==a,t.parent().toggleClass("fmp-field-error",!r)}else if("text"===n){var o=t.find("input[type=text]").val().trim();r=o.length>0,t.parent().toggleClass("fmp-field-error",!r)}else{var i=t.find("input:checked").length>0;r=i,t.parent().toggleClass("fmp-field-error",!i),t.find("input").prop("required",!i)}})),e(".fmp-addon-inner-content.fmp-field-error").length>0&&(r=!1),!r){t.preventDefault();var o=e(".fmp-addon-inner-content.fmp-field-error").first();window.scrollTo({top:o.offset().top-50,behavior:"smooth"})}r&&null!==(n=fmpAddonVar)&&void 0!==n&&n.singleAddToCartAjax&&(t.preventDefault(),a.singleAddToCartAjax())}))},calculatePrice:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(".fmp-addon-inner-content").each((function(){n?a.calculateOptionPrice(t):e(this).on("change",(function(){a.calculateOptionPrice(t)}))}))},calculateOptionPrice:function(t){var n=0;e(".fmp-addon-field:checked, .fmp-addon-field :selected").each((function(){var t=e(this);if(!t.is("textarea")||0!==e.trim(t.val()).length){var a=Number(t.attr("data-price"));n+=a}}));var r=e(".fmp-product-addon-total"),o=parseInt(r.data("prod-discount"))||0,i=parseInt(r.data("discount-percentage"))||0,d=r.data("discount-apply-to"),l=r.data("price-decimal-number"),c=n;o&&"addon_total"===d&&n>0&&(c=n-i/100*n),r.find(".fmp-addon-option-total").text(c.toFixed(l)),t.text(a.totalPriceCalculate())},totalPriceCalculate:function(){var t=e(".fmp-product-addon-total"),n=t.data("price-decimal-number");return(parseFloat(t.find(".fmp-product-total").text())+parseFloat(t.find(".fmp-addon-option-total").text())).toFixed(n)},singleAddToCartAjax:function(){e.fn.serializeArrayAll=function(){var n=/\r?\n/g;return this.map((function(e,n){return n.elements?function(e){if(Array.isArray(e))return t(e)}(a=n.elements)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():n;var a})).map((function(t,a){var r=e(a).val();return null===r?{name:a.name,value:null}:"checkbox"!==a.type||a.checked?"radio"!==a.type?Array.isArray(r)?r.map((function(t){return{name:a.name,value:t.replace(n,"\r\n")}})):{name:a.name,value:r.replace(n,"\r\n")}:a.checked?{name:a.name,value:a.value}:void 0:{name:a.name,value:""}})).get()};var n=e(".single_add_to_cart_button:not(.disabled)"),a=n.closest("form.cart"),r=a.find('input:not([name="product_id"]):not([disabled]), select, button, textarea').serializeArrayAll()||0;return e.each(r,(function(t,e){"add-to-cart"===e.name&&(e.name="product_id",e.value=a.find("input[name=variation_id]").val()||n.val())})),e(document.body).trigger("adding_to_cart",[n,r]),e.ajax({type:"POST",url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:r,beforeSend:function(t){n.removeClass("added").addClass("loading")},complete:function(t){n.addClass("added").removeClass("loading")},success:function(t){t.error&&t.product_url?window.location=t.product_url:e(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,n])}}),!1}}}(jQuery)}();